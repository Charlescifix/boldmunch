<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bold Munch — Fresh Baked Delights</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Poppins:wght@600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --cream:#FFF9F3; /* background tone */
      --gold:#F1C40F; /* logo yellow accent */
      --bronze:#8B4513; /* warm brown text */
      --burgundy:#E67E22; /* warm orange CTA */
      --sage:#27AE60; /* fresh green delivery */
      --charcoal:#1A1A1A; /* main text */
      --glass: rgba(255,255,255,0.7);
      --glass-dark: rgba(255,255,255,0.45);
      --radius-lg: 24px;
      --radius-sm: 16px;
      --shadow: 0 12px 40px rgba(0,0,0,.15);
      --shadow-soft: 0 8px 24px rgba(0,0,0,.1);
      --shadow-luxury: 0 16px 50px rgba(230,126,34,.2);
    }
    *{box-sizing:border-box}
    html,body{margin:0;background:linear-gradient(180deg,var(--cream),#ffffff);font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;color:var(--charcoal)}
    a{color:inherit}

    /* Header */
    header{
      position:sticky;top:0;z-index:20;
      backdrop-filter:blur(12px);
      background:linear-gradient(180deg,rgba(255,255,255,.85),rgba(255,255,255,.55));
      border-bottom:1px solid rgba(0,0,0,.06);
    }
    .container{max-width:1100px;margin:0 auto;padding:16px}
    .brand{
      display:flex;align-items:center;gap:12px;font-weight:800;font-family:Poppins,Inter,system-ui,sans-serif;letter-spacing:.2px
    }
    .logo{
      width:96px;height:96px;border-radius:24px;
      object-fit:contain;
      box-shadow:0 16px 45px rgba(211,84,0,0.6), var(--shadow);
      border:4px solid rgba(255,255,255,0.5);
    }
    .logo:before{content:"";position:absolute;inset:0;background:radial-gradient(circle at 70% 20%,rgba(255,255,255,.8),transparent 40%)}
    .brand small{display:block;font-weight:600;font-size:11px;color:#7a6b5f;margin-top:-4px}

    /* Delivery pill - attention grabbing with deadline */
    .delivery-pill{
      display:flex;flex-direction:column;align-items:center;gap:6px;
      background:linear-gradient(135deg,#FFD700,#FFC107);
      color:var(--charcoal);padding:16px 22px;border-radius:20px;font-weight:900;font-size:14px;
      box-shadow:0 10px 28px rgba(255,215,0,0.5), inset -4px -4px 10px rgba(255,255,255,0.3), inset 4px 4px 10px rgba(0,0,0,0.15);
      border:2px solid rgba(255,255,255,0.4);backdrop-filter:blur(18px);
      animation:deliveryBounce 2.5s infinite ease-in-out;
      transition:transform .2s ease;cursor:default;text-transform:uppercase;letter-spacing:1px;
      position:relative;overflow:hidden
    }
    .delivery-pill::before{
      content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;
      background:linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent);
      animation:shimmer 3s infinite;
    }
    .delivery-main{font-size:16px;font-weight:900}
    .delivery-deadline{
      font-size:11px;font-weight:700;
      background:var(--cream);
      color:var(--charcoal);padding:4px 10px;border-radius:999px;
      box-shadow:0 3px 8px rgba(139,69,19,0.15);
      border:2px solid var(--gold);
      text-transform:none;letter-spacing:0.5px
    }
    .delivery-pill:hover{transform:scale(1.03)}
    @keyframes deliveryBounce{0%,20%,50%,80%,100%{transform:scale(1)}10%{transform:scale(1.02)}30%{transform:scale(1.01)}}
    @keyframes shimmer{0%{left:-100%}100%{left:100%}}
    .arrow-bounce{display:inline-block;animation:arrow 1.2s infinite ease-in-out}
    @keyframes arrow{0%,100%{transform:translateX(0)}50%{transform:translateX(4px)}}

    /* Hero strip */
    .hero{
      padding:12px 0 10px;
      display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap
    }

    /* Menu grid */
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:14px}
    @media (max-width:780px){
      .grid{grid-template-columns:1fr}
      .hero{flex-direction:column;gap:12px;align-items:stretch}
      .card{flex-direction:column;text-align:center;padding:16px}
      .card-img{width:100%;height:160px;margin:0 auto}
      .mini-card{min-height:320px}
      .special-services{padding:16px;margin-top:20px}
      .service-buttons{flex-direction:column;gap:8px}
      .special-btn,.ingredients-btn{width:100%;max-width:none;font-size:14px;padding:14px}
      .social-link{font-size:11px;padding:5px 8px}
      .delivery-pill{padding:12px 16px;font-size:12px}
      .delivery-main{font-size:14px}
      .delivery-deadline{font-size:10px}
    }

    .card{
      background:var(--glass);backdrop-filter:blur(14px);
      border-radius:var(--radius-lg);box-shadow:var(--shadow-soft);
      border:1px solid rgba(255,255,255,.65);
      overflow:hidden;display:flex;gap:14px;padding:14px
    }
    .card-img{width:120px;height:120px;flex:0 0 120px;border-radius:16px;object-fit:cover;box-shadow:var(--shadow)}
    .card-body{flex:1;display:flex;flex-direction:column;gap:8px}
    .title{font-family:Poppins,Inter,sans-serif;font-size:18px;font-weight:800}
    .desc{font-size:13px;color:#6b6b6b}
    .price{font-weight:800;color:var(--bronze)}

    /* Steppers */
    .stepper{display:flex;align-items:center;gap:8px}
    .pill{min-width:38px;height:38px;border-radius:14px;display:grid;place-items:center;font-weight:800;cursor:pointer;
      background:linear-gradient(145deg, #FFFFFF 0%, #F8F9FA 100%);
      box-shadow: inset -4px -4px 8px rgba(255,255,255,0.9), inset 4px 4px 8px rgba(139,69,19,0.15);
      user-select:none;transition:transform .1s ease;color:var(--charcoal);
    }
    .pill:active{transform:scale(.96)}
    .qty{min-width:40px;text-align:center;font-weight:800}

    /* CTA buttons (luxury) */
    .btn{
      background:transparent;
      color:var(--charcoal);font-weight:800;border:2px solid var(--gold);padding:14px 20px;border-radius:20px;cursor:pointer;
      transition:transform .15s ease, box-shadow .3s ease;letter-spacing:0.5px
    }
    .btn:active{transform:scale(.97)}
    .btn-secondary{
      background:linear-gradient(145deg,#FFFFFF,#F8F9FA);color:var(--charcoal);
      box-shadow: inset -4px -4px 10px rgba(255,255,255,0.9), inset 4px 4px 10px rgba(139,69,19,0.15);
      border-radius:20px;padding:14px 20px;letter-spacing:0.5px;font-weight:700
    }

    /* Sticky cart bar */
    .cart-bar{
      position:sticky;bottom:0;z-index:30;margin-top:16px
    }
    .cart-inner{
      display:flex;align-items:center;justify-content:space-between;gap:10px;
      background:var(--glass);backdrop-filter:blur(16px);border:1px solid rgba(255,255,255,.65);
      border-radius:22px;padding:12px 14px;box-shadow:var(--shadow)
    }
    .chip{display:inline-flex;align-items:center;gap:8px;padding:10px 16px;border-radius:999px;font-weight:800;background:rgba(241,196,15,.25);border:1px solid rgba(241,196,15,.7);color:var(--gold)}

    /* Size selection buttons */
    .size-selector{display:flex;gap:6px;margin:6px 0;justify-content:center}
    .size-btn{
      padding:8px 16px;font-size:12px;font-weight:700;border:1px solid rgba(241,196,15,.3);
      border-radius:12px;background:linear-gradient(145deg,#FFFFFF,#F8F9FA);cursor:pointer;transition:all .2s ease;
      min-width:60px;text-align:center;color:var(--charcoal);
    }
    .size-btn.active{background:linear-gradient(145deg,#FFD700,#FFC107);color:var(--charcoal);border-color:transparent;box-shadow:0 4px 15px rgba(255,215,0,0.4);}
    .size-btn:hover{transform:translateY(-1px)}

    /* Social Icons - Subtle Logo Style */
    .social-link {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 6px 10px;
      background: rgba(255,248,220,0.4);
      border: 1px solid rgba(241,196,15,0.2);
      border-radius: 16px;
      text-decoration: none;
      color: var(--bronze);
      font-weight: 600;
      font-size: 12px;
      box-shadow: 0 2px 8px rgba(241,196,15,0.1);
      transition: all 0.3s ease;
      backdrop-filter: blur(8px);
    }
    .social-link:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(241,196,15,0.2);
      background: rgba(255,248,220,0.6);
      color: var(--bronze);
    }
    .social-link svg {
      opacity: 0.7;
      transition: opacity 0.3s ease;
    }
    .social-link:hover svg {
      opacity: 1;
    }

    /* Special Services Section */
    .special-services {
      margin-top: 24px;
      padding: 20px;
      background: linear-gradient(135deg, rgba(255,235,180,0.8), rgba(245,215,140,0.6));
      border: 2px solid rgba(241,196,15,0.3);
      border-radius: var(--radius-lg);
      box-shadow: 0 8px 32px rgba(241,196,15,0.25);
      text-align: center;
      position: relative;
    }
    .service-buttons {
      display: flex;
      gap: 10px;
      justify-content: center;
      flex-wrap: wrap;
      align-items: center;
    }
    .special-btn {
      background: linear-gradient(145deg, #E67E22, #D35400);
      color: #fff;
      font-weight: 800;
      padding: 12px 16px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      font-size: 13px;
      box-shadow: 0 4px 16px rgba(230,126,34,0.3);
      transition: transform 0.25s ease;
      letter-spacing: 0.3px;
      text-transform: uppercase;
      border: 2px solid rgba(255,255,255,0.4);
      flex: 1;
      min-width: 140px;
      max-width: 180px;
    }
    .special-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(230,126,34,0.4);
    }
    .ingredients-btn {
      background: linear-gradient(145deg, #8B4513, #A0522D);
      color: #fff;
      font-weight: 700;
      padding: 12px 16px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      font-size: 13px;
      box-shadow: 0 4px 16px rgba(139,69,19,0.3);
      transition: transform 0.25s ease;
      letter-spacing: 0.3px;
      border: 2px solid rgba(255,255,255,0.3);
      flex: 1;
      min-width: 140px;
      max-width: 180px;
    }
    .ingredients-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(139,69,19,0.4);
    }
    .powered-by {
      position: absolute;
      bottom: 8px;
      right: 12px;
      font-size: 10px;
      color: rgba(139,105,20,0.4);
      font-weight: 600;
      letter-spacing: 0.5px;
    }

    /* Mini Banana Bread Enhanced UX */
    .mini-card {
      background: linear-gradient(135deg, rgba(255,248,220,0.9), rgba(255,235,180,0.7));
      border: 2px solid rgba(241,196,15,0.4);
      box-shadow: 0 12px 40px rgba(241,196,15,0.25);
      position: relative;
      overflow: visible;
      transition: all 0.4s ease;
      min-height: 380px;
    }
    .mini-card::before {
      content: "MINI SELECTION";
      position: absolute;
      top: -10px;
      left: 16px;
      background: linear-gradient(45deg, #FFD700, #FFA500);
      color: #8B4513;
      padding: 6px 12px;
      border-radius: 12px;
      font-size: 10px;
      font-weight: 900;
      letter-spacing: 1px;
      box-shadow: 0 4px 12px rgba(255,215,0,0.4);
    }
    .mini-card.expanded {
      transform: scale(1.02);
      box-shadow: 0 16px 50px rgba(241,196,15,0.35);
      z-index: 10;
    }
    .mini-selector-container {
      margin: 10px 0;
      padding: 12px;
      background: rgba(255,255,255,0.6);
      border-radius: 12px;
      border: 1px solid rgba(241,196,15,0.3);
    }
    .variety-dropdown {
      width: 100%;
      padding: 10px 12px;
      border: 2px solid rgba(241,196,15,0.3);
      border-radius: 10px;
      background: linear-gradient(145deg, #FFFFFF, #F8F9FA);
      font-weight: 600;
      font-size: 13px;
      color: var(--charcoal);
      cursor: pointer;
      transition: all 0.3s ease;
      margin-bottom: 10px;
    }
    .variety-dropdown:focus {
      outline: none;
      border-color: var(--gold);
      box-shadow: 0 0 0 3px rgba(212,165,116,0.2);
    }
    .mini-selection-list {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.4s ease;
    }
    .mini-selection-list.expanded {
      max-height: 300px;
    }
    .selection-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 14px;
      margin: 6px 0;
      background: linear-gradient(145deg, rgba(255,255,255,0.8), rgba(245,245,245,0.6));
      border: 1px solid rgba(255,193,7,0.2);
      border-radius: 10px;
      font-size: 13px;
      animation: slideIn 0.3s ease;
    }
    @keyframes slideIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .selection-name {
      font-weight: 700;
      color: var(--charcoal);
      flex: 1;
    }
    .selection-size {
      font-size: 11px;
      color: var(--bronze);
      background: rgba(212,165,116,0.2);
      padding: 2px 6px;
      border-radius: 6px;
      margin: 0 8px;
    }
    .selection-price {
      font-weight: 800;
      color: var(--burgundy);
    }
    .remove-selection {
      background: rgba(139,38,53,0.1);
      color: var(--burgundy);
      border: none;
      width: 20px;
      height: 20px;
      border-radius: 10px;
      cursor: pointer;
      font-size: 12px;
      margin-left: 8px;
      transition: all 0.2s ease;
    }
    .remove-selection:hover {
      background: var(--burgundy);
      color: white;
      transform: scale(1.1);
    }
    .mini-progress {
      margin: 8px 0;
      padding: 10px;
      background: linear-gradient(135deg, rgba(139,38,53,0.1), rgba(139,38,53,0.05));
      border-radius: 10px;
      border-left: 3px solid var(--burgundy);
    }
    .progress-bar {
      width: 100%;
      height: 8px;
      background: rgba(139,38,53,0.2);
      border-radius: 4px;
      overflow: hidden;
      margin: 8px 0;
    }
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--burgundy), #A03243);
      border-radius: 4px;
      transition: width 0.3s ease;
      width: 0%;
    }
    .progress-text {
      font-size: 12px;
      font-weight: 700;
      color: var(--burgundy);
      text-align: center;
    }
    .mini-total {
      padding: 10px;
      background: linear-gradient(135deg, rgba(212,165,116,0.2), rgba(212,165,116,0.1));
      border-radius: 10px;
      margin: 8px 0;
      border: 1px solid rgba(212,165,116,0.3);
    }
    .total-row {
      display: flex;
      justify-content: space-between;
      margin: 4px 0;
    }
    .total-label {
      font-weight: 600;
      color: var(--charcoal);
    }
    .total-value {
      font-weight: 800;
      color: var(--bronze);
    }
    .mini-add-btn {
      width: 100%;
      padding: 12px;
      background: linear-gradient(145deg, var(--burgundy), #A03243);
      color: white;
      border: none;
      border-radius: 10px;
      font-weight: 800;
      font-size: 13px;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-top: 8px;
      letter-spacing: 0.5px;
      text-transform: uppercase;
    }
    .mini-add-btn:disabled {
      background: linear-gradient(145deg, #ccc, #999);
      cursor: not-allowed;
      opacity: 0.6;
    }
    .mini-add-btn:not(:disabled):hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(139,38,53,0.4);
    }

    /* Security & Protection */
    .no-select {
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      -webkit-touch-callout: none;
      -webkit-tap-highlight-color: transparent;
    }
    
    /* Disable image dragging */
    img {
      -webkit-user-drag: none;
      -khtml-user-drag: none;
      -moz-user-drag: none;
      -o-user-drag: none;
      user-drag: none;
      pointer-events: none;
    }
    
    /* Re-enable pointer events for interactive elements */
    button, a, select, input {
      pointer-events: auto;
    }

    /* Utilities */
    .hidden{display:none}
    .spacer{height:6px}
    .mt-8{margin-top:8px}.mt-12{margin-top:12px}.mt-16{margin-top:16px}.mt-24{margin-top:24px}
  </style>
</head>
<body class="no-select">
  <header>
    <div class="container hero">
      <div class="brand">
        <img src="new_logo.png" alt="Bold Munch Logo" class="logo" />
        <div>
          <div style="display:flex;align-items:center;gap:10px">
            <span style="font-size:24px;font-weight:900;text-transform:uppercase;letter-spacing:1px">BOLD MUNCH</span>
          </div>
          <small>PREMUIM HANDMADE GOODNESS</small>
        </div>
      </div>
      <div style="display:flex;align-items:center;gap:16px;flex-wrap:wrap">
        <div style="display:flex;align-items:center;gap:8px">
          <a href="#" class="social-link" aria-label="TikTok">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
              <path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43V7.83a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.26z"/>
            </svg>
            <span>TikTok</span>
          </a>
          <a href="#" class="social-link" aria-label="Instagram">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
              <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
              <circle cx="17.5" cy="6.5" r="1.5"></circle>
            </svg>
            <span>Instagram</span>
          </a>
        </div>
        <div class="delivery-pill" title="We deliver on Saturdays">
          <div class="delivery-main">
            Delivery Day: Saturdays
          </div>
          <div class="delivery-deadline">
            📅 Order before 9AM Friday
          </div>
        </div>
      </div>
    </div>
  </header>

  <main class="container" id="app">
    <section class="mt-12">
      <div class="grid" id="menuGrid"><!-- Cards injected by JS --></div>
      
      <!-- Special Services Section -->
      <div class="special-services">
        <h3 style="margin:0 0 16px;font-family:Poppins,sans-serif;font-size:22px;color:var(--charcoal)">🎉 Event Catering & Special Services</h3>
        <p style="margin:0 0 16px;color:#8B4513;font-size:14px;max-width:600px;margin-left:auto;margin-right:auto;font-weight:600">Make your special moments sweeter! We cater for birthdays, weddings, corporate events, baby showers, graduation parties, anniversaries, and holiday celebrations.</p>
        <div class="service-buttons">
          <button onclick="requestSpecialDelivery()" class="special-btn">
            🎂 Event Catering
          </button>
          <button onclick="makeEnquiry()" class="special-btn">
            💬 Make Enquiry
          </button>
          <button onclick="showIngredients()" class="ingredients-btn">
            📋 View Ingredients
          </button>
        </div>
        <div class="powered-by">Powered by <a href="https://www.gen3block.com" target="_blank" style="color: inherit; text-decoration: none;">Gen3block AI</a></div>
      </div>
    </section>
  </main>

  <script>
    // Variety options for mini banana breads (all £3.50 each)
    const miniVarieties = [
      "Classic Banana Bread",
      "Double Chocolate Banana Bread",
      "Nutella Banana Bread",
      "Carrot Banana Bread",
      "Coconut Bounty Banana Bread",
      "Nutty Banana Bread",
      "Oats Crumble Banana Bread",
      "Oreo Banana Bread"
    ];
    
    const MINI_CLASSIC_PRICE = 2;
    const MINI_OTHER_PRICE = 2.5;

    // State for mini selections
    const miniSelections = new Map(); // productId -> array of {variety, size, price}

    // --- Data ---
    const products = [
      // TOP SECTION - Classics, Chocolate, Nutella
      {
        id:"banana-classic",
        name:"Classic Banana Bread",
        desc:"Traditional banana bread perfection.",
        prices:{medium:11, maxi:17},
        img:"Classic banana bread.jpg",
        type:"bread",
        sizes:["medium","maxi"],
        priority:1
      },
      {
        id:"double-choc",
        name:"Double Chocolate Banana Bread",
        desc:"Ultra-rich chocolate banana bread dream.",
        prices:{medium:14, maxi:21},
        img:"Double Chocolate Bread.jpg",
        type:"bread",
        sizes:["medium","maxi"],
        priority:1
      },
      {
        id:"nutella-classic",
        name:"Nutella Banana Bread",
        desc:"Rich Nutella swirl in every slice.",
        prices:{medium:14, maxi:21},
        img:"Nutella Bread 2.jpg",
        type:"bread",
        sizes:["medium","maxi"],
        priority:1
      },
      {
        id:"carrot-banana",
        name:"Carrot Banana Bread",
        desc:"Packed with Carrot, Raisins and Walnuts.",
        prices:{medium:13, maxi:20},
        img:"carrot banana bread.jpeg",
        type:"bread",
        sizes:["medium","maxi"],
        priority:1
      },
      // MIDDLE SECTION - Other banana bread varieties
      {
        id:"banana-coconut",
        name:"Coconut Bounty Banana Bread",
        desc:"Tropical Coconut and Chocoloate Delight.",
        prices:{medium:14, maxi:21},
        img:"Coconut bounty banana bread.PNG",
        type:"bread",
        sizes:["medium","maxi"],
        priority:2
      },
      {
        id:"banana-nutty",
        name:"Nutty Banana Bread",
        desc:"Loaded with Crunchy Nuts.",
        prices:{medium:15, maxi:22},
        img:"Nutty banana bread.PNG",
        type:"bread",
        sizes:["medium","maxi"],
        priority:2
      },
      {
        id:"banana-oats",
        name:"Oats Crumble Banana Bread",
        desc:"Hearty oats topping with a buttery crunch.",
        prices:{medium:13, maxi:20},
        img:"Oats crumble banana bread.JPG",
        type:"bread",
        sizes:["medium","maxi"],
        priority:2
      },
      {
        id:"banana-oreo",
        name:"Oreo Banana Bread",
        desc:"Chunks of Oreo in every bite.",
        prices:{medium:14, maxi:21},
        img:"Oreos Banana bread.JPG",
        type:"bread",
        sizes:["medium","maxi"],
        priority:2
      },
      {
        id:"choco-nuts",
        name:"Chocolate Nuts Banana Bread",
        desc:"Decadent chocolate with crunchy nuts.",
        prices:{medium:15, maxi:22},
        img:"Choco Nuts.jpg",
        type:"bread",
        sizes:["medium","maxi"],
        priority:2
      },
      // BOTTOM SECTION - Mini, Meat Pie, Puff Puff
      {
        id:"banana-mini",
        name:"Mini Banana Breads",
        desc:"Choose from all our delicious varieties.",
        price:2,
        img:"Banana bread mini 3.jpg",
        type:"minimum",
        minOrder:6,
        priority:4
      },
      {
        id:"meatpie-classic",
        name:"Traditional Meat Pie",
        desc:"Golden pastry with juicy beef filling.",
        price:3.5,
        img:"MEATPIE.PNG",
        type:"minimum",
        minOrder:10,
        priority:3
      },
      {
        id:"puff-puff",
        name:"Nigerian Puff Puff",
        desc:"Donut vibes, upgraded.",
        price:0.8,
        img:"Puff Puff.jpg",
        type:"minimum",
        minOrder:20,
        priority:3
      }
    ];

    // --- State ---
    const cart = new Map();
    const selectedSizes = new Map();

    // --- Helpers ---
    const $ = (q, el=document) => el.querySelector(q);
    const $$ = (q, el=document) => [...el.querySelectorAll(q)];
    const money = (n) => n.toLocaleString('en-GB',{style:'currency',currency:'GBP'});

    function renderMenu(){
      const grid = $('#menuGrid');
      grid.innerHTML = '';
      // Sort products by priority (1=top, 2=middle, 3=bottom)
      const sortedProducts = [...products].sort((a, b) => a.priority - b.priority);
      sortedProducts.forEach(p=>{
        // Initialize selected size for bread items
        if(p.type === 'bread' && !selectedSizes.has(p.id)){
          selectedSizes.set(p.id, 'medium');
        }
        
        const card = document.createElement('article');
        // Apply special styling for mini banana bread
        if (p.id === 'banana-mini') {
          card.className = 'card mini-card';
        } else {
          card.className = 'card';
        }
        
        // Size selector HTML for bread items
        const sizeSelector = p.type === 'bread' ? `
          <div class="size-selector" data-product="${p.id}">
            ${p.sizes.map(size => `
              <div class="size-btn ${selectedSizes.get(p.id) === size ? 'active' : ''}" data-size="${size}">
                ${size.charAt(0).toUpperCase() + size.slice(1)}
              </div>
            `).join('')}
          </div>
        ` : '';

        // Special handling for mini banana bread
        const miniSelector = (p.id === 'banana-mini') ? `
          <div class="mini-selector-container">
            <select class="variety-dropdown" data-product="${p.id}">
              <option value="">Select a variety...</option>
              ${miniVarieties.map(variety => `
                <option value="${variety}">${variety}</option>
              `).join('')}
            </select>
            <div class="mini-selection-list" data-product="${p.id}"></div>
            <div class="mini-progress">
              <div class="progress-text">0 of 6 minimum selected</div>
              <div class="progress-bar">
                <div class="progress-fill"></div>
              </div>
            </div>
            <div class="mini-total">
              <div class="total-row">
                <span class="total-label">Total Items:</span>
                <span class="total-value total-items">0</span>
              </div>
              <div class="total-row">
                <span class="total-label">Total Price:</span>
                <span class="total-value total-price">£0.00</span>
              </div>
            </div>
            <button class="mini-add-btn" data-product="${p.id}" disabled>
              Add to Cart (Minimum 6 Required)
            </button>
          </div>
        ` : '';

        // Get current price based on selected size or fixed price
        const currentPrice = p.type === 'bread' ? 
          p.prices[selectedSizes.get(p.id)] : p.price;
        
        const defaultQty = p.minOrder || 0;
        
        // Calculate total minimum order price for minimum order items
        const priceDisplay = p.type === 'minimum' ? 
          `${money(currentPrice)} each<br><small style="color: var(--bronze); font-weight: 600;">Min order: ${p.minOrder} (${money(currentPrice * p.minOrder)} total)</small>` :
          money(currentPrice);
        
        card.innerHTML = `
          <img class="card-img" src="${p.img}" alt="${p.name}">
          <div class="card-body">
            <div class="title">${p.name}</div>
            <div class="desc">${p.desc}</div>
            ${sizeSelector}
            ${miniSelector}
            <div style="display:flex;align-items:center;justify-content:space-between;gap:10px" class="mt-8">
              <div class="price" data-product="${p.id}">${priceDisplay}</div>
              <div class="stepper" data-id="${p.id}">
                <div class="pill minus" aria-label="decrease quantity">–</div>
                <div class="qty" aria-live="polite">${defaultQty}</div>
                <div class="pill plus" aria-label="increase quantity">+</div>
              </div>
            </div>
            <div style="display:flex;gap:10px;align-items:center" class="mt-8">
              <button class="btn add" data-id="${p.id}">Add to Cart ➜</button>
              <button class="btn btn-secondary quick" data-id="${p.id}">Quick Add</button>
            </div>
          </div>`;
        grid.appendChild(card);
      });

      // Hook up size selectors
      $$('.size-selector').forEach(selector => {
        const productId = selector.dataset.product;
        $$('.size-btn', selector).forEach(btn => {
          btn.addEventListener('click', () => {
            $$('.size-btn', selector).forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            const size = btn.dataset.size;
            selectedSizes.set(productId, size);
            
            // Update price display
            const product = products.find(p => p.id === productId);
            const priceEl = $(`.price[data-product="${productId}"]`);
            priceEl.textContent = money(product.prices[size]);
          });
        });
      });

      // Hook up mini banana bread selectors
      $$('.variety-dropdown').forEach(dropdown => {
        dropdown.addEventListener('change', (e) => {
          const productId = dropdown.dataset.product;
          const varietyName = e.target.value;
          
          if (varietyName && productId === 'banana-mini') {
            const price = varietyName === 'Classic Banana Bread' ? MINI_CLASSIC_PRICE : MINI_OTHER_PRICE;
            addMiniSelection(productId, varietyName, price);
            dropdown.value = ''; // Reset dropdown
          }
        });
      });

      $$('.mini-add-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
          const productId = btn.dataset.product;
          addMiniToCart(productId);
        });
      });

      // Hook up steppers & buttons
      $$('.stepper').forEach(step=>{
        const id = step.dataset.id;
        const product = products.find(p => p.id === id);
        const qtyEl = $('.qty', step);
        const minus = $('.minus', step);
        const plus = $('.plus', step);
        let tempQty = product?.minOrder || 0;
        qtyEl.textContent = tempQty;

        minus.addEventListener('click',()=>{
          const minQty = product?.minOrder || 0;
          tempQty = Math.max(minQty, tempQty-1);
          qtyEl.textContent = tempQty;
          updatePriceDisplay(id, tempQty);
        });
        plus.addEventListener('click',()=>{
          tempQty+=1;
          qtyEl.textContent=tempQty;
          updatePriceDisplay(id, tempQty);
        });
        
        // Add button
        const addBtn = step.parentElement.parentElement.querySelector('.add');
        addBtn.addEventListener('click',()=>{
          const qtyToAdd = tempQty > 0 ? tempQty : 1;
          addToCart(id, qtyToAdd);
          tempQty = product?.minOrder || 0; 
          qtyEl.textContent = tempQty;
        });
        
        const quickBtn = step.parentElement.parentElement.querySelector('.quick');
        quickBtn.addEventListener('click',()=> {
          const qtyToAdd = product?.minOrder || 1;
          addToCart(id, qtyToAdd);
        });
      });
    }

    function addMiniSelection(productId, varietyName, price) {
      if (!miniSelections.has(productId)) {
        miniSelections.set(productId, []);
      }
      
      const selections = miniSelections.get(productId);
      selections.push({ variety: varietyName, price });
      
      updateMiniDisplay(productId);
    }

    function removeMiniSelection(productId, index) {
      const selections = miniSelections.get(productId);
      selections.splice(index, 1);
      updateMiniDisplay(productId);
    }

    function updateMiniDisplay(productId) {
      const selections = miniSelections.get(productId) || [];
      const listContainer = $(`.mini-selection-list[data-product="${productId}"]`);
      const progressText = listContainer.parentElement.querySelector('.progress-text');
      const progressFill = listContainer.parentElement.querySelector('.progress-fill');
      const totalItems = listContainer.parentElement.querySelector('.total-items');
      const totalPrice = listContainer.parentElement.querySelector('.total-price');
      const addBtn = listContainer.parentElement.querySelector('.mini-add-btn');
      const card = listContainer.closest('.mini-card');
      
      // Update selection list
      listContainer.innerHTML = '';
      let total = 0;
      
      selections.forEach((selection, index) => {
        const item = document.createElement('div');
        item.className = 'selection-item';
        item.innerHTML = `
          <span class="selection-name">${selection.variety}</span>
          <span class="selection-price">£${selection.price.toFixed(2)}</span>
          <button class="remove-selection" onclick="removeMiniSelection('${productId}', ${index})">×</button>
        `;
        listContainer.appendChild(item);
        total += selection.price;
      });
      
      // Show/hide selection list
      if (selections.length > 0) {
        listContainer.classList.add('expanded');
        card.classList.add('expanded');
      } else {
        listContainer.classList.remove('expanded');
        card.classList.remove('expanded');
      }
      
      // Update progress
      const count = selections.length;
      const percentage = Math.min((count / 6) * 100, 100);
      progressText.textContent = `${count} of 6 minimum selected`;
      progressFill.style.width = `${percentage}%`;
      
      // Update totals
      totalItems.textContent = count;
      totalPrice.textContent = `£${total.toFixed(2)}`;
      
      // Update button state
      if (count >= 6) {
        addBtn.disabled = false;
        addBtn.textContent = `Add ${count} Mini Breads to Cart`;
        progressText.style.color = '#4CAF50';
      } else {
        addBtn.disabled = true;
        addBtn.textContent = `Add to Cart (${6 - count} more needed)`;
        progressText.style.color = 'var(--burgundy)';
      }
    }

    function updatePriceDisplay(productId, qty) {
      const product = products.find(p => p.id === productId);
      const priceEl = $(`.price[data-product="${productId}"]`);
      
      if (product && product.type === 'minimum' && priceEl) {
        const totalPrice = product.price * qty;
        priceEl.innerHTML = `${money(product.price)} each<br><small style="color: var(--bronze); font-weight: 600;">Total: ${money(totalPrice)}</small>`;
      }
    }

    function addMiniToCart(productId) {
      const selections = miniSelections.get(productId) || [];
      
      if (selections.length < 6) {
        alert(`Please select at least 6 mini breads. You currently have ${selections.length} selected.`);
        return;
      }
      
      // Add each selection to cart
      selections.forEach((selection, index) => {
        const cartKey = `${productId}-${index}`;
        const cartItem = {
          product: {
            id: productId,
            name: `Mini ${selection.variety}`,
            price: selection.price
          },
          qty: 1,
          variety: selection.variety
        };
        
        cart.set(cartKey, cartItem);
      });
      
      // Clear selections
      miniSelections.set(productId, []);
      updateMiniDisplay(productId);
      
      alert(`Successfully added ${selections.length} mini banana breads to your cart!`);
      console.log('Mini breads added to cart:', selections);
    }

    function addToCart(id, qty){
      // Skip mini banana bread - it has its own handler
      if (id === 'banana-mini') {
        alert('Please use the variety selector above to choose your mini breads!');
        return;
      }
      
      const product = products.find(p=>p.id===id);
      const size = product.type === 'bread' ? selectedSizes.get(id) : null;
      
      // Create unique cart key
      let cartKey = id;
      if(size) cartKey += `-${size}`;
      
      const prev = cart.get(cartKey)?.qty || 0;
      
      // Create cart item with proper price and info
      const price = product.type === 'bread' ? product.prices[size] : product.price;
      
      const cartItem = {
        product: {...product, price}, 
        qty: prev + qty, 
        size
      };
      
      cart.set(cartKey, cartItem);
      console.log('Added to cart:', cartItem);
    }

    function requestSpecialDelivery(){
      const message = `Hello Bold Munch! 🎉

I'm interested in event catering for:
□ Birthday party (kids/adults)
□ Wedding celebration
□ Corporate event/meeting
□ Baby shower
□ Graduation party
□ Anniversary celebration
□ Holiday party (Christmas/Easter)
□ Other special event

Event details:
• Date & time:
• Number of guests:
• Preferred items:
• Special requirements:

Please contact me to discuss!

Thank you! 🍰`;

      const encodedMessage = encodeURIComponent(message);
      const whatsappUrl = `https://wa.me/1234567890?text=${encodedMessage}`;
      window.open(whatsappUrl, '_blank');
    }

    function makeEnquiry(){
      const message = `Hello Bold Munch! 👋

I have some questions about:
□ Product availability
□ Pricing and bulk orders
□ Delivery areas & times
□ Custom flavor requests
□ Dietary restrictions/allergies
□ Event catering packages
□ Other enquiry

Please get back to me when convenient.

Thank you!`;

      const encodedMessage = encodeURIComponent(message);
      const whatsappUrl = `https://wa.me/1234567890?text=${encodedMessage}`;
      window.open(whatsappUrl, '_blank');
    }

    function showIngredients(){
      const ingredientsInfo = `🍞 BOLD MUNCH INGREDIENTS 🍞

🥖 CLASSIC BANANA BREAD:
• Fresh ripe bananas
• Premium flour
• Brown sugar
• Free-range eggs
• Butter
• Vanilla extract
• Baking powder
• Salt

🍫 CHOCOLATE VARIETIES:
• Belgian dark chocolate
• Cocoa powder
• Chocolate chips

🥥 SPECIALTY ADDITIONS:
• Coconut flakes
• Mixed nuts (almonds, walnuts)
• Rolled oats
• Oreo cookies
• Nutella spread

🥧 MEAT PIE:
• Minced beef
• Onions & spices
• Puff pastry
• Carrots & potatoes

🍩 PUFF PUFF:
• Flour
• Sugar
• Yeast
• Nutmeg
• Vegetable oil

⚠️ ALLERGEN INFO:
• Contains: Gluten, Eggs, Dairy, Nuts
• Made in facility that processes nuts

💚 All ingredients are fresh & quality sourced!`;

      alert(ingredientsInfo);
    }

    // --- Security & Protection ---
    // Disable right-click context menu
    document.addEventListener('contextmenu', (e) => {
      e.preventDefault();
      return false;
    });

    // Disable common developer shortcuts
    document.addEventListener('keydown', (e) => {
      // Disable F12, Ctrl+Shift+I, Ctrl+Shift+J, Ctrl+U
      if (e.key === 'F12' || 
          (e.ctrlKey && e.shiftKey && (e.key === 'I' || e.key === 'J')) ||
          (e.ctrlKey && e.key === 'U')) {
        e.preventDefault();
        return false;
      }
    });

    // Disable text selection on sensitive elements
    document.addEventListener('selectstart', (e) => {
      if (e.target.classList.contains('no-select')) {
        e.preventDefault();
        return false;
      }
    });

    // Basic obfuscation warning
    console.clear();
    console.log('%cSTOP!', 'color: red; font-size: 50px; font-weight: bold;');
    console.log('%cThis is a browser feature intended for developers. Bold Munch content is protected.', 'color: red; font-size: 16px;');

    // --- Events ---
    document.addEventListener('DOMContentLoaded',()=>{
      renderMenu();
    });
  </script>
</body>
</html>